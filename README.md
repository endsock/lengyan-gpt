# 楞严经PDF繁简转换工具

将PDF文件中的繁体中文转换为简体中文，并输出为HTML格式，保留原有文字格式（如粗体等）。

## 功能特点

- 使用 `pdfplumber` 解析PDF文件
- 使用 `OpenCC` 进行高质量繁简转换
- 自动检测横排/竖排布局
- 保留文字格式（粗体、字体大小等）
- 输出为易于阅读的HTML格式
- 支持大型PDF文件（已测试1578页）

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 方法1：直接运行（使用默认路径）

```bash
python pdf_converter.py
```

默认会处理 `D:\EBook\fo\楞严经OCR\大佛顶首楞严经讲义[圆瑛法师].pdf`

### 方法2：修改源文件路径

编辑 `pdf_converter.py` 文件的最后几行：

```python
if __name__ == "__main__":
    src = r"你的PDF文件路径.pdf"
    dst = os.path.join(os.getcwd(), "输出文件名.html")

    convert_pdf_to_html(src, dst)
```

### 方法3：只处理部分页面（测试用）

```python
# 只处理前10页
convert_pdf_to_html(src, dst, max_pages=10)
```

## 输出结果

- 生成的HTML文件位于项目目录下
- 文件大小：约2.6MB（1578页）
- 可直接用浏览器打开阅读

## 技术实现

### 布局检测

程序会自动检测PDF是横排还是竖排：
- 统计不同X坐标和Y坐标的数量
- X坐标数量 < Y坐标数量 × 0.5 → 竖排
- 否则 → 横排

### 字序处理

**竖排布局**：
1. 按X坐标分列
2. 每列内按Y坐标从上到下排序
3. 列与列之间从左到右排列

**横排布局**：
1. 按Y坐标分行
2. 每行内按X坐标从左到右排序
3. 行与行之间从上到下排列

## 注意事项

- 处理大型PDF文件需要较长时间（1578页约需5-10分钟）
- 转换质量取决于原PDF的OCR文本层质量
- 建议先用小范围测试（如前10页）确认效果
